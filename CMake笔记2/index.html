<!DOCTYPE html><html class="theme-next pisces" lang="zh-CN"><head><meta charset="UTF-8"><meta name="generator" content="Hexo 3.9.0"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0"><link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content=""><meta name="baidu-site-verification" content="8gbQ8pd371"><link rel="stylesheet" href="/css/main.css?v=7.3.0"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"7.3.0",exturl:!0,sidebar:{position:"right",display:"post",offset:12,onmobile:!1},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},save_scroll:!0,copycode:{enable:!0,show_result:!1,style:null},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:-1,unescape:!1,preload:!0},path:"search.xml",motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},translation:{copy_button:"复制",copy_success:"复制成功",copy_failure:"复制失败"}}</script><meta name="description" content="GNU 编译链接工具链Liunx-gcc tool_chain(工具链) 预处理  生成&amp;lt;.i&amp;gt;文件，通过选项-E可以使编译器在预处理结束时停止编译  例如：gcc -E -o hello.i hello.c   编译  生成&amp;lt;.s&amp;gt;汇编代码文件，通过选项-S可以使gcc在进行编译后停止  例如：gcc -S -o hello.s hello.c   汇编  生成&amp;lt;."><meta name="keywords" content="CMake"><meta property="og:type" content="article"><meta property="og:title" content="CMake笔记2"><meta property="og:url" content="https://2694048168.github.io/CMake笔记2/index.html"><meta property="og:site_name" content="云主宰苍穹"><meta property="og:description" content="GNU 编译链接工具链Liunx-gcc tool_chain(工具链) 预处理  生成&amp;lt;.i&amp;gt;文件，通过选项-E可以使编译器在预处理结束时停止编译  例如：gcc -E -o hello.i hello.c   编译  生成&amp;lt;.s&amp;gt;汇编代码文件，通过选项-S可以使gcc在进行编译后停止  例如：gcc -S -o hello.s hello.c   汇编  生成&amp;lt;."><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2020-07-12T14:31:36.099Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="CMake笔记2"><meta name="twitter:description" content="GNU 编译链接工具链Liunx-gcc tool_chain(工具链) 预处理  生成&amp;lt;.i&amp;gt;文件，通过选项-E可以使编译器在预处理结束时停止编译  例如：gcc -E -o hello.i hello.c   编译  生成&amp;lt;.s&amp;gt;汇编代码文件，通过选项-S可以使gcc在进行编译后停止  例如：gcc -S -o hello.s hello.c   汇编  生成&amp;lt;."><link rel="alternate" href="/atom.xml" title="云主宰苍穹" type="application/atom+xml"><link rel="canonical" href="https://2694048168.github.io/CMake笔记2/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,isPage:!1,isArchive:!1}</script><title>CMake笔记2 | 云主宰苍穹</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-right"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">云主宰苍穹</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Stay Hungry, Stay Foolish.</h1></div><div class="site-nav-toggle"> <button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益 404</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header> <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tLzI2OTQwNDgxNjg=" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></span><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content page-post-detail"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://2694048168.github.io/CMake笔记2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="云主宰苍穹"><meta itemprop="description" content="云主宰苍穹,物联网,计算机视觉、图形处理、深度学习、人工智能、机器学习"><meta itemprop="image" content="/images/liwei.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="云主宰苍穹"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">CMake笔记2</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-07-12 16:25:47 / 修改时间：22:31:36" itemprop="dateCreated datePublished" datetime="2020-07-12T16:25:47+08:00">2020-07-12</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C&C++</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>5.1k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>5 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="GNU-编译链接工具链"><a href="#GNU-编译链接工具链" class="headerlink" title="GNU 编译链接工具链"></a>GNU 编译链接工具链</h2><h3 id="Liunx-gcc-tool-chain-工具链"><a href="#Liunx-gcc-tool-chain-工具链" class="headerlink" title="Liunx-gcc tool_chain(工具链)"></a>Liunx-gcc tool_chain(工具链)</h3><ol><li>预处理</li></ol><p><strong>生成&lt;.i&gt;文件，通过选项-E可以使编译器在预处理结束时停止编译</strong></p><ul><li>例如：gcc -E -o hello.i hello.c</li></ul><ol start="2"><li>编译</li></ol><p><strong>生成&lt;.s&gt;汇编代码文件，通过选项-S可以使gcc在进行编译后停止</strong></p><ul><li>例如：gcc -S -o hello.s hello.c</li></ul><ol start="3"><li>汇编</li></ol><p><strong>生成&lt;.o&gt;的目标文件，是机器语言代码《二进制》，当一个程序由多个代码文件 构成时，每个文件都要先完成汇编工作，生成.o目标文件后，才能进行链接，可以通过选项-C生成目标文件</strong></p><ul><li>例如：gcc -C -o hello.o helllo.c</li></ul><ol start="4"><li>链接</li></ol><p><strong>将程序的所有机器代码的目标文件链接，使操作系统能加载为可执行文件</strong></p><ul><li>例如：gcc -o hello hello.c</li><li>或者：gcc hello.c -o hello</li></ul><h2 id="Makefile-构建编译链接"><a href="#Makefile-构建编译链接" class="headerlink" title="Makefile 构建编译链接"></a>Makefile 构建编译链接</h2><h3 id="makefile-概述"><a href="#makefile-概述" class="headerlink" title="makefile 概述"></a>makefile 概述</h3><p>make 命令执行时，需要一个 makefile 文件，以告诉 make 命令需要怎么样的去编译和链接程序。</p><ul><li>如果这个工程没有编译过，那么所有c文件都要编译并被链接。</li><li>如果这个工程的某几个c文件被修改，那么只编译被修改的c文件，并链接目标程序。</li><li>如果这个工程的头文件被改变了，那么需要编译引用了这几个头文件的c文件，并链接目标程序。</li><li>只要 makefile 写得够好，所有的这一切，只用一个 make 命令就可以完成，make 命令会自动智能地根据当前的文件修改的情况来确定哪些文件需要重编译，从而自动编译所需要的文件和链接目标程序。</li></ul><h2 id="CMake-构建编译链接"><a href="#CMake-构建编译链接" class="headerlink" title="CMake 构建编译链接"></a>CMake 构建编译链接</h2><h3 id="基本概述请移步-《CMake笔记》文章"><a href="#基本概述请移步-《CMake笔记》文章" class="headerlink" title="基本概述请移步 《CMake笔记》文章"></a>基本概述请移步 《CMake笔记》文章</h3><h3 id="Demos"><a href="#Demos" class="headerlink" title="Demos"></a>Demos</h3><p><strong>单目录单文件</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 0、项目工程结构</span><br><span class="line">mkdir project_name</span><br><span class="line">cd project_name</span><br><span class="line">touch Main.cpp CMakeLists.txt</span><br><span class="line">vim Main.cpp</span><br><span class="line">vim CMakeLists.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 1、编写 CMakeLists.txt 文件</span><br><span class="line"><span class="meta">#</span> CMake 要求最低版本</span><br><span class="line">CMAKE_MINIMUM_REQUIRED (VERSION 3.5)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 项目工程名称以及工程支持的语言</span><br><span class="line">PROJECT (project_name [CXX][C][JAVA])</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 生成可执行文件</span><br><span class="line">ADD_EXECUTABLE (executable_name Main.cpp)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 2、使用 cmake 命令生成 Makefile 文件</span><br><span class="line">cmake .</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 3、使用 make 命令</span><br><span class="line">make</span><br></pre></td></tr></table></figure><p><strong>单目录多文件</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 0、项目工程结构</span><br><span class="line">mkdir project_name</span><br><span class="line">cd project_name</span><br><span class="line">touch Main.cpp Fuction.cpp</span><br><span class="line">vim Main.cpp</span><br><span class="line">touch CMakeLists.txt </span><br><span class="line">vim CMakeLists.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 1、编写 CMakeLists.txt 文件</span><br><span class="line"><span class="meta">#</span> CMake 要求最低版本</span><br><span class="line">CMAKE_MINIMUM_REQUIRED (VERSION 3.5)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 项目工程名称以及工程支持的语言</span><br><span class="line">PROJECT (project_name [CXX][C][JAVA])</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 自动搜索路径下所有的源文件赋值给变量</span><br><span class="line">AUX_SOURCE_DIRECTORY (./ src_dir)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 生成可执行文件</span><br><span class="line">ADD_EXECUTABLE (executable_name $&#123;src_dir&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 2、使用 cmake 命令生成 Makefile 文件</span><br><span class="line">cmake .</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 3、使用 make 命令</span><br><span class="line">make</span><br></pre></td></tr></table></figure><p><strong>多目录多文件</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 0、项目工程结构</span><br><span class="line">mkdir project_name</span><br><span class="line">cd project_name</span><br><span class="line">touch Main.cpp CMakeLists.txt</span><br><span class="line">vim Main.cpp</span><br><span class="line">vim CMakeLists.txt</span><br><span class="line">cd ..</span><br><span class="line">mkdir lib</span><br><span class="line">cd lib </span><br><span class="line">touch CMakeLists.txt Function.cpp Function.hpp </span><br><span class="line">vim CMakeLists.txt Function.cpp Function.hpp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 1、编写 lib 文件夹下的 CMakeLists.txt 文件</span><br><span class="line"><span class="meta">#</span> 自动搜索路径下所有的源文件赋值给变量</span><br><span class="line">AUX_SOURCE_DIRECTORY (. src_dir)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 添加静态库 STATIC 动态库 SHARE</span><br><span class="line">ADD_LIBRARY (Function STATIC $&#123;src_dir&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 2、编写 project_name 文件夹下的 CMakeLists.txt 文件</span><br><span class="line"><span class="meta">#</span> CMake 要求最低版本</span><br><span class="line">CMAKE_MINIMUM_REQUIRED (VERSION 3.5)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 项目工程名称以及工程支持的语言</span><br><span class="line">PROJECT (project_name [CXX][C][JAVA])</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 添加工程目录的依赖的源文件的子目录</span><br><span class="line">ADD_SUBDIRECTORY (./lib)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 自动搜索路径下所有的源文件赋值给变量</span><br><span class="line">AUX_SOURCE_DIRECTORY (./ src_dir)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 生成可执行文件</span><br><span class="line">ADD_EXECUTABLE (executable_name $&#123;src_dir&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 链接静态库文件 Function</span><br><span class="line">TARGET_LINK_LIBRARIES (executable_name Function)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 3、使用 cmake 命令生成 Makefile 文件</span><br><span class="line">cmake .</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 4、使用 make 命令</span><br><span class="line">make</span><br></pre></td></tr></table></figure><p><strong>多目录多文件的标准工程结构</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 0、项目工程结构</span><br><span class="line">mkdir project_name</span><br><span class="line">cd project_name</span><br><span class="line">mkdir src</span><br><span class="line">cd src</span><br><span class="line">touch Main.cpp CMakeLists.txt</span><br><span class="line">vim Main.cpp</span><br><span class="line">vim CMakeLists.txt</span><br><span class="line">cd ..</span><br><span class="line">mkdir lib</span><br><span class="line">cd lib </span><br><span class="line">touch CMakeLists.txt Function.cpp Function.hpp </span><br><span class="line">vim CMakeLists.txt Function.cpp Function.hpp</span><br><span class="line">cd ..</span><br><span class="line">mkdir build</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 1、编写 src 文件夹下的 CMakeLists.txt 文件</span><br><span class="line"><span class="meta">#</span> 添加头文件搜索路径 = project_name/lib</span><br><span class="line">INCLUDE_DIRECTORY ($&#123;PROJECT_SOURCE_DIR&#125;/lib)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 设置 生成可执行程序的输出路径 = build/bin</span><br><span class="line">SET (EXECUTABLE_OUTPUT_PATH $&#123;PROJECT_BINARY_DIR&#125;/bin)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 自动搜索路径下所有的源文件赋值给变量</span><br><span class="line">AUX_SOURCE_DIRECTORY (./ src_dir)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 生成可执行文件</span><br><span class="line">ADD_EXECUTABLE (executable_name $&#123;src_dir&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 链接静态库文件 Function</span><br><span class="line">TARGET_LINK_LIBRARIES (executable_name Function)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 2、编写 lib 文件夹下的 CMakeLists.txt 文件</span><br><span class="line"><span class="meta">#</span> 自动搜索路径下所有的源文件赋值给变量</span><br><span class="line">AUX_SOURCE_DIRECTORY (. src_dir)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 设置 生成库的输出路径 = build/lib</span><br><span class="line">SET (LIBRARY_OUTPUT_PATH $&#123;PROJECT_BINARY_DIR&#125;/lib)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 添加静态库 STATIC 动态库 SHARE</span><br><span class="line">ADD_LIBRARY (Function STATIC $&#123;src_dir&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 3、编写 project_name 文件夹下的 CMakeLists.txt 文件(顶层 CMakeLists.txt)</span><br><span class="line"><span class="meta">#</span> CMake 要求最低版本</span><br><span class="line">CMAKE_MINIMUM_REQUIRED (VERSION 3.5)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 项目工程名称以及工程支持的语言</span><br><span class="line">PROJECT (project_name [CXX][C][JAVA])</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 添加工程目录的依赖的源文件的子目录</span><br><span class="line">ADD_SUBDIRECTORY (./lib)</span><br><span class="line">ADD_SUBDIRECTORY (./src)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 4、使用 cmake 命令生成 Makefile 文件</span><br><span class="line"><span class="meta">#</span> 采用外部编译</span><br><span class="line">cd build</span><br><span class="line">cmake ..</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 5、使用 make 命令</span><br><span class="line">make</span><br></pre></td></tr></table></figure><p><strong>自定义编译选项</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 0、项目工程结构</span><br><span class="line">mkdir project_name</span><br><span class="line">cd project_name</span><br><span class="line">mkdir src</span><br><span class="line">cd src</span><br><span class="line">touch Main.cpp CMakeLists.txt</span><br><span class="line">vim Main.cpp</span><br><span class="line">vim CMakeLists.txt</span><br><span class="line">cd ..</span><br><span class="line">mkdir lib</span><br><span class="line">cd lib </span><br><span class="line">touch CMakeLists.txt Function.cpp Function.hpp </span><br><span class="line">vim CMakeLists.txt Function.cpp Function.hpp</span><br><span class="line">cd ..</span><br><span class="line">mkdir build</span><br><span class="line">mkdir config</span><br><span class="line">cd config</span><br><span class="line">touch config.hpp.in</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 1、编写 src 文件夹下的 CMakeLists.txt 文件</span><br><span class="line"><span class="meta">#</span> 设置 生成可执行程序的输出路径 = build/bin</span><br><span class="line">SET (EXECUTABLE_OUTPUT_PATH $&#123;PROJECT_BINARY_DIR&#125;/bin)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 配置自定义编译选项部分 = "input" "output"</span><br><span class="line">CONFIG_FILE ("$&#123;PROJECT_SOURCE_DIR&#125;/config/config.hpp.in" </span><br><span class="line">             "$&#123;PROJECT_SOURCE_DIR&#125;/config/config.hpp.in" </span><br><span class="line">             )</span><br><span class="line"><span class="meta">#</span> 自定义编译选项 宏定义</span><br><span class="line">OPTION (USE_MATH</span><br><span class="line">        ON</span><br><span class="line">        )</span><br><span class="line"><span class="meta">#</span> 条件编译 = 使用自己编写的库，否则使用第三方库</span><br><span class="line">IF(USE_MATH)</span><br><span class="line"><span class="meta">#</span> 添加头文件搜索路径 = project_name/lib</span><br><span class="line">INCLUDE_DIRECTORY ($&#123;PROJECT_SOURCE_DIR&#125;/lib)</span><br><span class="line">ENDIF(USE_MATH)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 自动搜索路径下所有的源文件赋值给变量</span><br><span class="line">AUX_SOURCE_DIRECTORY (./ src_dir)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 生成可执行文件</span><br><span class="line">ADD_EXECUTABLE (executable_name $&#123;src_dir&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 链接静态库文件 Function</span><br><span class="line">TARGET_LINK_LIBRARIES (executable_name Function)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 2、编写自定义编译选项文件 </span><br><span class="line">cd config</span><br><span class="line">vim config.hpp.in</span><br><span class="line"><span class="meta">#</span> 添加以下内容——自定义编译选项</span><br><span class="line"><span class="meta">#</span>cmakedefine USE_MATH</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 3、编写 lib 文件夹下的 CMakeLists.txt 文件</span><br><span class="line"><span class="meta">#</span> 自动搜索路径下所有的源文件赋值给变量</span><br><span class="line">AUX_SOURCE_DIRECTORY (. src_dir)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 设置 生成库的输出路径 = build/lib</span><br><span class="line">SET (LIBRARY_OUTPUT_PATH $&#123;PROJECT_BINARY_DIR&#125;/lib)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 添加静态库 STATIC 动态库 SHARE</span><br><span class="line">ADD_LIBRARY (Function STATIC $&#123;src_dir&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 4、编写 project_name 文件夹下的 CMakeLists.txt 文件(顶层 CMakeLists.txt)</span><br><span class="line"><span class="meta">#</span> CMake 要求最低版本</span><br><span class="line">CMAKE_MINIMUM_REQUIRED (VERSION 3.5)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 项目工程名称以及工程支持的语言</span><br><span class="line">PROJECT (project_name [CXX][C][JAVA])</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 添加工程目录的依赖的源文件的子目录</span><br><span class="line">ADD_SUBDIRECTORY (./lib)</span><br><span class="line">ADD_SUBDIRECTORY (./src)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 5、使用 cmake 命令生成 Makefile 文件</span><br><span class="line"><span class="meta">#</span> 采用外部编译</span><br><span class="line">cd build</span><br><span class="line">cmake ..</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 6、使用 make 命令</span><br><span class="line">make</span><br></pre></td></tr></table></figure></div><div class="popular-posts-header">相关文章</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="\CMake笔记\" rel="bookmark">CMake笔记</a></div></li></ul><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读，欢迎分享！-------------</div></div></div><div><div class="my_post_copyright"><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script type="text/javascript" src="http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js"></script><script src="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js"></script><link rel="stylesheet" type="text/css" href="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css"><p><span>本文标题:</span>CMake笔记2</p><p><span>文章作者:</span>云主宰苍穹</p><p><span>原始链接:</span><a href="/CMake笔记2/" title="CMake笔记2">https://2694048168.github.io/CMake笔记2/</a><span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://2694048168.github.io/CMake笔记2/" aria-label="复制成功！"></i></span></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p></div><script>var clipboard=new Clipboard(".fa-clipboard");clipboard.on("success",$(function(){$(".fa-clipboard").click(function(){swal({title:"",text:"复制成功",html:!1,timer:500,showConfirmButton:!1})})}))</script></div><div id="reward-container"><div></div> <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';"> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/images/wechatpay.png" alt="云主宰苍穹 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/images/alipay.png" alt="云主宰苍穹 支付宝"><p>支付宝</p></div></div></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/CMake/" rel="tag"># CMake</a></div><div class="post-widgets"><div class="social-share"><div id="needsharebutton-postbottom"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/机器学习算法工作流程简述/" rel="next" title="机器学习算法工作流程简述"><i class="fa fa-chevron-left"></i> 机器学习算法工作流程简述</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></div></article></div></div><div class="comments" id="gitalk-container"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/liwei.jpg" alt="云主宰苍穹"><p class="site-author-name" itemprop="name">云主宰苍穹</p><div class="site-description motion-element" itemprop="description">云主宰苍穹,物联网,计算机视觉、图形处理、深度学习、人工智能、机器学习</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">36</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">8</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">28</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzI2OTQwNDgxNjgv" title="GitHub &rarr; https://github.com/2694048168/"><i class="fa fa-fw fa-github"></i> GitHub</span></span><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNTk2MzU1MzMwOS8=" title="Weibo &rarr; https://weibo.com/5963553309/"><i class="fa fa-fw fa-weibo"></i> Weibo</span></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzI2OTQwNDgxNjgv" title="https://github.com/2694048168/">github</span></li><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vd2VpbGlfeXp6Y3Ev" title="https://gitee.com/weili_yzzcq/">gitee</span></li><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Njc4MjIxOC8=" title="https://blog.csdn.net/weixin_46782218/">csdn</span></li><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMzYyOTAxODc3Lw==" title="https://space.bilibili.com/362901877/">bilibili</span></li><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly9hdXRob3IuYmFpZHUuY29tL2hvbWUvMTYyMzY0NDY2NjE2MjYwMS8=" title="https://author.baidu.com/home/1623644666162601/">百家号-专注物联网知识</span></li><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly93d3cudG91dGlhby5jb20vYy91c2VyLzIwMDk1NDExMTY2OTkwNzkv" title="https://www.toutiao.com/c/user/2009541116699079/">头条号-专注物联网知识</span></li></ul></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#GNU-编译链接工具链"><span class="nav-number">1.</span> <span class="nav-text">GNU 编译链接工具链</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Liunx-gcc-tool-chain-工具链"><span class="nav-number">1.1.</span> <span class="nav-text">Liunx-gcc tool_chain(工具链)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Makefile-构建编译链接"><span class="nav-number">2.</span> <span class="nav-text">Makefile 构建编译链接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#makefile-概述"><span class="nav-number">2.1.</span> <span class="nav-text">makefile 概述</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CMake-构建编译链接"><span class="nav-number">3.</span> <span class="nav-text">CMake 构建编译链接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本概述请移步-《CMake笔记》文章"><span class="nav-number">3.1.</span> <span class="nav-text">基本概述请移步 《CMake笔记》文章</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Demos"><span class="nav-number">3.2.</span> <span class="nav-text">Demos</span></a></li></ol></li></ol></div></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2020</span><span class="with-love" id="animate"><i class="fa fa-heartbeat"></i></span> <span class="author" itemprop="copyrightHolder">云主宰苍穹</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">169k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">2:34</span></div><div class="powered-by">由 <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> 强力驱动 v3.9.0</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 – <span class="exturl theme-link" data-url="aHR0cHM6Ly90aGVtZS1uZXh0Lm9yZw==">NexT.Pisces</span> v7.3.0</div><div class="busuanzi-count"><script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> 访问用户：<span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人</span><div class="powered-by"></div><span class="site-uv"><i class="fa fa-eye"></i> 访问次数：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"middleRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script></div><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="/js/utils.js?v=7.3.0"></script><script src="/js/affix.js?v=7.3.0"></script><script src="/js/schemes/pisces.js?v=7.3.0"></script><script src="/js/next-boot.js?v=7.3.0"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js?v=7.3.0"></script><script src="/js/scrollspy.js?v=7.3.0"></script><script src="/js/post-details.js?v=7.3.0"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script>NexT.utils.getScript("//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js",function(){new Gitalk({clientID:"aebff323e44f1516e521",clientSecret:"3934128e2a234e13b6118386667dee31ab703836",repo:"2694048168.github.io",owner:"2694048168",admin:["2694048168"],id:"8bfa22649fa6ca4bb1a7ac379526bf25",language:"en | es-ES | fr | ru | zh-CN | zh-TW",distractionFreeMode:"true"}).render("gitalk-container")},window.Gitalk)</script></body></html>